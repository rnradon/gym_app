<div ng-controller="delete_user_controller">


<link rel="stylesheet" type="text/css" href="res/css/del_user/card.css">

<div class="col-xs-12 col-sm-3 col-md-4 col-lg-4 col-md-offset-4" style = "align-items: center; margin-top: 10%;">
		  <div class="categoryWrap" style = "display:flex; align-items:center; flex-direction:column;">

		  <script>
		        $("#back_to_del_landing_page").click(function back_to_admin_landing_page(){
		          var unsorted_url = window.location.pathname.split('id=');
		       	  unsorted_url = unsorted_url[1].split('/access_token=');
		       	
		          console.log(unsorted_url)
		 		  var id = unsorted_url[0]
		 		  var access_token = unsorted_url[1]
		          var url = '/del_gym_user?' + 'access_token=' + access_token
		          window.location.replace(url)
		        });
		    </script>
		    <a href="" id="back_to_del_landing_page" class="btn btn-info backBtn" style="margin-top: 5%"><span>Back</span></a>

          
          <div style = "display:flex; align-items:center">
          
            <i class="fa fa-user-circle" aria-hidden="true" class="catImage text-center" style="font-size: 100px; margin-top: 15%"></i>
            </div>
            <div class="catContent" style = "align-items:center">
              <h3 class="titleHeading" style = "text-align:center; text-transform: uppercase;">{{users_json_data.name}}
              </h3>
              <p class = "help-block" style = "text-align:center">{{users_json_data.registration_number}}<br> +91-{{users_json_data.phone_number}}</p>
              <hr>
              <div >
                <p style = "text-align:center;">{{users_json_data.email}}<br><br>

                </p>
              </div>
              <br/>
            </div>


            
          <div class="col-xs-12" style = "align-items:center; text-align:center"><br>
            <a class="btn btn-info btnBg" id="delete" >
              <span>Delete User
              </span> 
            </a>
          </div>
          <div class="cl">
          </div>
          <br/>
          </div>
    <div class="cl">
    </div>
    <br/>
    <br/>
  </div>


<script>
      
        $("#delete").click(function(event){
       	var unsorted_url = window.location.pathname.split('id=');
       	 unsorted_url = unsorted_url[1].split('/access_token=');
       	
       	console.log(unsorted_url)
 		var id = unsorted_url[0]
 		var access_token = unsorted_url[1]

         $.ajax({
            method: 'DELETE',
            url : '/api/gym_users/' + id + '?' + 'access_token=' + access_token, // or whatever
            dataType : 'json',
            success : function (response) {
                alert("Successfully deleted the user. Page will reload to delete users page")
                // var app = angular.module('my_app', []);
                // app.controller('myCtrl', function($scope, $http) {
                //   $http.get('/api/gym_users/findOne?filter[where][registration_number]=' + reg_number + '&' + access_token)
                //   .then(function(response) {
                //       $scope.myWelcome = response.data;
                //   });
                // });
                window.location.replace('/del_gym_user?' + 'access_token=' +access_token)
            },
            error: function (response) {
                alert("Invalid Registration Number. The page will reload automatically. Please enter the correct Registration Number")
                // setTimeout(function() { window.location.reload(true); }, 2000)
            },
        });
          
        });
      

      
      </script>